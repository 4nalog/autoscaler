syntax = "proto3";

package grpcplugin;
import "k8s.io/api/core/v1/generated.proto";
//import "google/protobuf/struct.proto";
option go_package = "cluster-autoscaler/expander/grpcplugin";



// Interface for Expander
service Expander {

  rpc BestOption (BestOptionRequest)
    returns (BestOptionResponse) {}
}

message BestOptionRequest {
  repeated Option options = 1;
  // key is node id from options
  map<string, k8s.io.api.core.v1.Node> nodeInfoMap = 2;
}
message BestOptionResponse {
  Option option = 1;
}
message Option {
  // only need the ID of node to uniquely identify the nodeGroup, used in the nodeInfo map.
  string nodeGroupId = 1;
  int32 nodeCount = 2;
  string debug = 3;
  repeated k8s.io.api.core.v1.Pod pod = 4;
}